1
00:00:00,000 --> 00:00:03,036
♪ 柔和乐器演奏的嘻哈音乐 ♪

2
00:00:03,036 --> 00:00:10,143
♪

3
00:00:10,143 --> 00:00:12,045
嗨 我是 Alex Young

4
00:00:12,045 --> 00:00:15,516
我是 iCloud 开发者
体验团队的工程师

5
00:00:15,516 --> 00:00:18,418
CloudKit 是一种
打造完美体验的简单方法

6
00:00:18,418 --> 00:00:21,321
它让用户可以轻松地在设备之间

7
00:00:21,321 --> 00:00:23,624
同步数据

8
00:00:23,624 --> 00:00:26,460
CloudKit Console 提供了可让您
使用 App 的架构和数据

9
00:00:26,460 --> 00:00:30,731
的工具 从而让这一切变得更加简单

10
00:00:30,731 --> 00:00:33,600
我将分享
CloudKit Console 的一些更新

11
00:00:33,600 --> 00:00:35,369
这些更新有助于您了解和调试

12
00:00:35,369 --> 00:00:38,172
App 的架构和数据

13
00:00:38,172 --> 00:00:41,909
首先 我将介绍如何使用隐藏容器

14
00:00:41,909 --> 00:00:44,311
然后深入探讨
一种使用 iCloud 帐户

15
00:00:44,311 --> 00:00:46,713
查看记录的新方法

16
00:00:46,713 --> 00:00:48,415
最后 对于使用共享区域

17
00:00:48,415 --> 00:00:51,151
有一些很棒的更新

18
00:00:51,151 --> 00:00:54,054
常见的做法是在开发过程中
创建大量容器

19
00:00:54,054 --> 00:00:56,657
而以后只关注其中的少数几个

20
00:00:56,657 --> 00:00:57,891
通过新的隐藏容器功能

21
00:00:57,891 --> 00:01:00,694
您可以更好地组织这个过程

22
00:01:00,694 --> 00:01:02,629
在 CloudKit Console 中

23
00:01:02,629 --> 00:01:05,499
您可以选择
哪些容器是隐藏的或可见的

24
00:01:05,499 --> 00:01:07,234
隐藏容器不仅

25
00:01:07,234 --> 00:01:09,403
在 Console 内的列表中不可见

26
00:01:09,403 --> 00:01:11,538
在所有开发者工具中也不可见

27
00:01:11,538 --> 00:01:13,740
包括 Xcode

28
00:01:13,740 --> 00:01:16,009
更妙之处在于 当一个容器被隐藏时

29
00:01:16,009 --> 00:01:17,878
它适用于团队级别

30
00:01:17,878 --> 00:01:20,681
这意味着您的所有测试和原型容器

31
00:01:20,681 --> 00:01:24,084
不再乱放在队友的视图上

32
00:01:24,084 --> 00:01:28,655
现在我将打开 Console
并使用这个新功能

33
00:01:28,655 --> 00:01:30,424
登录 Console 后

34
00:01:30,424 --> 00:01:34,428
从顶级导航栏打开容器选择器

35
00:01:34,428 --> 00:01:36,830
然后单击
“Manage Containers”(管理容器)

36
00:01:36,830 --> 00:01:39,466
这将显示一个新菜单 允许您切换

37
00:01:39,466 --> 00:01:43,704
当前团队中每个容器的可见性

38
00:01:43,704 --> 00:01:46,773
对于隶属于多个团队的用户 您可以

39
00:01:46,773 --> 00:01:49,576
使用右上角的帐户菜单
在各团队之间切换

40
00:01:49,576 --> 00:01:51,378
然后 您还可以

41
00:01:51,378 --> 00:01:54,381
继续在其他团队中隐藏容器

42
00:01:54,381 --> 00:01:57,351
这是来自 WWDC 21 的容器

43
00:01:57,351 --> 00:01:59,052
我们不再需要它了

44
00:01:59,052 --> 00:02:01,655
我可以把它隐藏 就像这样

45
00:02:01,655 --> 00:02:04,691
如果您在 Xcode 中
刷新容器列表

46
00:02:04,691 --> 00:02:08,962
您会看到这些容器在那里也隐藏起来

47
00:02:08,962 --> 00:02:11,565
我将告诉您
Console 的一个新增功能

48
00:02:11,565 --> 00:02:13,901
此功能让您可以
使用 iCloud 帐户查看数据

49
00:02:13,901 --> 00:02:16,236
而不是使用开发者帐户

50
00:02:16,236 --> 00:02:19,806
这称为 Act As iCloud

51
00:02:19,806 --> 00:02:23,010
有时 可能很难理解为什么某些用户

52
00:02:23,010 --> 00:02:27,814
在处理其私人数据库中的数据时
会遇到问题

53
00:02:27,814 --> 00:02:29,650
现在您可以

54
00:02:29,650 --> 00:02:34,087
用单独的 iCloud 帐户登录
以查看私人数据

55
00:02:34,087 --> 00:02:36,156
当您使用 iCloud
帐户登录时

56
00:02:36,156 --> 00:02:39,226
CloudKit Console 的
查询工具会

57
00:02:39,226 --> 00:02:42,229
按照您从该帐户的角度
所期望的那样工作

58
00:02:42,229 --> 00:02:43,497
这有助于您

59
00:02:43,497 --> 00:02:47,868
代表用户排查开发和生产问题

60
00:02:47,868 --> 00:02:49,503
我将在 Console 中
演示这个过程

61
00:02:49,503 --> 00:02:52,573
以说明此功能是如何工作的

62
00:02:52,573 --> 00:02:55,709
这个查询
是使用我的开发者帐户执行的

63
00:02:55,709 --> 00:02:57,778
我要切换到 iCloud 帐户

64
00:02:57,778 --> 00:03:01,014
以显示查询结果如何变化

65
00:03:01,014 --> 00:03:05,052
首先 导航到
Act As iCloud 帐户菜单项

66
00:03:05,052 --> 00:03:07,254
这将打开一个对话框

67
00:03:07,254 --> 00:03:09,256
允许您以 iCloud 帐户登录

68
00:03:09,256 --> 00:03:13,393
当我登录时
Console 的上下文将会改变

69
00:03:13,393 --> 00:03:15,729
现在您会在页面顶部看到一个横幅

70
00:03:15,729 --> 00:03:17,965
所有后续操作都将

71
00:03:17,965 --> 00:03:22,402
使用 iCloud 帐户
而不是开发者帐户执行

72
00:03:22,402 --> 00:03:24,705
您可以查询记录并查看区域

73
00:03:24,705 --> 00:03:28,909
但不能执行架构操作

74
00:03:28,909 --> 00:03:30,911
如您所见 此查询的结果

75
00:03:30,911 --> 00:03:34,882
是 iCloud 帐户的查询结果
而不是开发者帐户的查询结果

76
00:03:34,882 --> 00:03:36,950
如切换到另一个容器或环境

77
00:03:36,950 --> 00:03:39,586
则将停止充当 iCloud 帐户

78
00:03:39,586 --> 00:03:41,555
您也可以单击横幅中的按钮

79
00:03:41,555 --> 00:03:45,325
来停止 Act As 会话

80
00:03:45,325 --> 00:03:48,228
请记住 充当 iCloud 帐户的功能
适用于记录

81
00:03:48,228 --> 00:03:50,597
而不是架构 因此该功能仅适用于

82
00:03:50,597 --> 00:03:53,100
Console 的数据部分

83
00:03:53,100 --> 00:03:57,371
尝试访问架构
将停止 Act As 会话

84
00:03:57,371 --> 00:03:59,273
此功能有助于您更好地了解

85
00:03:59,273 --> 00:04:01,375
数据在生产中的使用方式

86
00:04:01,375 --> 00:04:06,280
更有效地调查与数据相关的错误

87
00:04:06,280 --> 00:04:08,615
充当另一个帐户时

88
00:04:08,615 --> 00:04:10,851
加密字段对您来说仍然不可读

89
00:04:10,851 --> 00:04:14,721
只有拥有数据的原始用户
才能解密这些字段

90
00:04:14,721 --> 00:04:16,490
这是设计使然
有助于 iCloud

91
00:04:16,490 --> 00:04:19,193
保持高水平的安全性和隐私性

92
00:04:19,193 --> 00:04:23,163
并确保敏感数据的安全

93
00:04:23,163 --> 00:04:27,234
接下来 我将展示
如何在 Console 中共享区域

94
00:04:27,234 --> 00:04:29,303
CloudKit 共享是

95
00:04:29,303 --> 00:04:33,006
一种在 App 用户之间
安全共享记录的方式

96
00:04:33,006 --> 00:04:34,808
这是安全的共享方式

97
00:04:34,808 --> 00:04:36,577
其使用的权限允许 App

98
00:04:36,577 --> 00:04:40,914
确定参与者的读写访问权限

99
00:04:40,914 --> 00:04:42,883
将共享定义为公共或私人

100
00:04:42,883 --> 00:04:47,888
可进一步控制参与者访问

101
00:04:47,888 --> 00:04:52,192
区域共享的工作方式是
将规则应用于区域中的每一条记录

102
00:04:52,192 --> 00:04:54,862
共享区域
具有 CloudKit 共享记录

103
00:04:54,862 --> 00:04:57,431
其中包含访问区域中每条记录

104
00:04:57,431 --> 00:04:59,600
的选项

105
00:04:59,600 --> 00:05:03,604
共享区域不能有现存的共享记录

106
00:05:03,604 --> 00:05:06,240
共享区域支持标准的

107
00:05:06,240 --> 00:05:10,210
公共和私人区域共享选项

108
00:05:10,210 --> 00:05:13,113
公共共享区域使拥有共享代码的

109
00:05:13,113 --> 00:05:15,616
每个用户都可以看到所有记录

110
00:05:15,616 --> 00:05:19,019
任何拥有短共享代码的用户
都可以加入此共享

111
00:05:19,019 --> 00:05:21,688
对于应该易于在用户之间共享

112
00:05:21,688 --> 00:05:25,459
且没有严格访问控制的记录
这是最理想的

113
00:05:25,459 --> 00:05:28,595
私人共享区域具有额外的安全层

114
00:05:28,595 --> 00:05:30,898
因为成员必须在参与者列表中

115
00:05:30,898 --> 00:05:33,667
才能加入共享

116
00:05:33,667 --> 00:05:36,036
CloudKit Console 有几个

117
00:05:36,036 --> 00:05:38,005
创建和查看区域共享的新工具

118
00:05:38,005 --> 00:05:40,240
可帮助您更好地了解共享区域

119
00:05:40,240 --> 00:05:43,844
并在开发和生产过程中使用它们

120
00:05:43,844 --> 00:05:48,582
现在让我们创建一个区域共享
以便您了解它是如何工作的

121
00:05:48,582 --> 00:05:52,186
导航到 Zones (区域)
然后选择要共享的区域

122
00:05:52,186 --> 00:05:54,588
单击详细信息视图中的

123
00:05:54,588 --> 00:05:56,356
“Configure zone wide sharing...”
(配置区域范围的共享…) 按钮

124
00:05:56,356 --> 00:05:58,091
这将显示一个表单 可让您决定

125
00:05:58,091 --> 00:06:01,461
是选择公共共享还是私人共享

126
00:06:01,461 --> 00:06:03,964
公共区域有一个额外的权限选项

127
00:06:03,964 --> 00:06:07,301
可用于创建只读或读写共享

128
00:06:07,301 --> 00:06:09,403
对于私人共享

129
00:06:09,403 --> 00:06:11,505
权限是在参与者级别定义的

130
00:06:11,505 --> 00:06:14,508
我要创建一个私人共享 就像这样

131
00:06:16,510 --> 00:06:19,146
共享区域后
您将会看到一个简短的唯一 ID

132
00:06:19,146 --> 00:06:23,951
可将其发送给要加入共享的参与者

133
00:06:23,951 --> 00:06:26,153
可以使用 Records (记录)
页面中的

134
00:06:26,153 --> 00:06:28,555
“Accept Shared Record”
(接受共享记录) 菜单选项

135
00:06:28,555 --> 00:06:31,058
在控制台中加入共享区域

136
00:06:31,058 --> 00:06:32,860
现在 在此区域中创建的任何记录

137
00:06:32,860 --> 00:06:35,996
都将自动共享

138
00:06:35,996 --> 00:06:38,765
现在您已经看到了
CloudKit Console 的这些更新

139
00:06:38,765 --> 00:06:42,269
请通过隐藏容器来整理您的容器列表

140
00:06:42,269 --> 00:06:44,938
试用 Act As iCloud
来查看

141
00:06:44,938 --> 00:06:48,342
不同 iCloud 帐户的记录
并尝试进行区域共享

142
00:06:48,342 --> 00:06:51,945
以更轻松地共享多个记录

143
00:06:51,945 --> 00:06:54,581
我们希望这些工具能让您
更好地了解您的架构

144
00:06:54,581 --> 00:06:57,518
并排查 App 中的问题

145
00:06:57,518 --> 00:07:01,188
从而使 CloudKit 更容易使用

146
00:07:01,188 --> 00:07:03,624
谢谢 祝您在 WWDC
度过愉快的时光

147
00:07:03,624 --> 00:07:07,661
♪

