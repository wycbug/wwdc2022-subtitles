1
00:00:00,000 --> 00:00:03,837
♪ 柔和乐器演奏的嘻哈音乐 ♪

2
00:00:03,837 --> 00:00:09,409
♪

3
00:00:09,409 --> 00:00:11,879
Karen Xing：
嗨 我是 Karen Xing

4
00:00:11,879 --> 00:00:14,414
我是相机软件团队的工程师

5
00:00:14,414 --> 00:00:16,750
欢迎来到 “集成连续互通

6
00:00:16,750 --> 00:00:19,186
至您的 macOS App 中“ 的讲座

7
00:00:19,186 --> 00:00:21,688
首先 我将谈一谈

8
00:00:21,688 --> 00:00:24,124
什么是“连续互通”相机？

9
00:00:24,124 --> 00:00:26,760
接下来 我将探讨您的 App 如何

10
00:00:26,760 --> 00:00:29,530
借助“连续互通”相机

11
00:00:29,530 --> 00:00:32,165
实现相机的自动选择

12
00:00:32,165 --> 00:00:34,935
最后 我将介绍
macOS 13 中用于

13
00:00:34,935 --> 00:00:40,474
“连续互通”相机的全新 API

14
00:00:40,474 --> 00:00:42,109
有了“连续互通”相机

15
00:00:42,109 --> 00:00:45,279
您就可以将 iPhone
用作网络摄像头

16
00:00:45,279 --> 00:00:46,680
无缝切换的设置

17
00:00:46,680 --> 00:00:49,116
让您只需将 iPhone
移至 Mac 附近

18
00:00:49,116 --> 00:00:54,621
它就能通过无线方式连接
使您快速加入通话

19
00:00:54,621 --> 00:00:57,191
满足以下几项条件

20
00:00:57,191 --> 00:00:59,927
您的 iPhone 即可成为

21
00:00:59,927 --> 00:01:01,962
您 Mac 上的外接摄像头和麦克风

22
00:01:01,962 --> 00:01:07,334
首先 您必须使用
macOS 13 和 iOS 16

23
00:01:07,334 --> 00:01:10,971
Mac 和 iPhone
必须登录同一

24
00:01:10,971 --> 00:01:13,941
通过双重认证的 Apple ID

25
00:01:13,941 --> 00:01:15,642
如果使用有线方式连接

26
00:01:15,642 --> 00:01:20,113
手机需通过 USB 连接到 Mac

27
00:01:20,113 --> 00:01:22,382
如果使用无线方式连接

28
00:01:22,382 --> 00:01:24,952
两台设备需位于彼此附近

29
00:01:24,952 --> 00:01:28,622
并同时开启蓝牙和 Wi-Fi

30
00:01:28,622 --> 00:01:31,625
与其进行口头介绍
不如由我立刻演示

31
00:01:31,625 --> 00:01:35,596
“连续互通”相机
在设备上的神奇表现

32
00:01:35,596 --> 00:01:38,765
我身边有一台 MacBook Pro
和一台 iPhone 13 Pro

33
00:01:38,765 --> 00:01:42,569
两台设备
都登录了同一 Apple ID

34
00:01:47,107 --> 00:01:50,444
手机放置在
与我的 MacBook 相连的支架上

35
00:01:50,444 --> 00:01:52,679
我将加入与同事 Eric 的

36
00:01:52,679 --> 00:01:54,381
视频会议通话

37
00:01:54,381 --> 00:01:58,919
并向您展示如何在 Zoom 中
使用“连续互通”相机

38
00:02:04,258 --> 00:02:07,094
这个 App
首先使用内置摄像头启动

39
00:02:07,094 --> 00:02:09,830
随后 一个流程指引对话框出现

40
00:02:09,830 --> 00:02:12,866
介绍您可以使用新相机实现的功能

41
00:02:12,866 --> 00:02:14,835
当您将 Mac
升级到 macOS 13 之后

42
00:02:14,835 --> 00:02:18,105
首次打开“相机” App

43
00:02:18,105 --> 00:02:20,841
以及有一台可以使用
“连续互通”相机的 iPhone 时

44
00:02:20,841 --> 00:02:25,879
此对话框将出现一次

45
00:02:27,881 --> 00:02:30,284
嗨 Eric！

46
00:02:30,284 --> 00:02:35,155
Eric：哦 Karen！嗨！

47
00:02:35,155 --> 00:02:38,258
在系统显示流程指引对话框后

48
00:02:38,258 --> 00:02:40,928
“连续互通”相机和麦克风设备

49
00:02:40,928 --> 00:02:45,532
将在所有 App 中可用

50
00:02:51,872 --> 00:02:55,542
让我们切换到这个相机
看看它的使用效果

51
00:03:01,114 --> 00:03:05,319
“连续互通”相机使用
iPhone 的后置摄像头系统

52
00:03:05,319 --> 00:03:07,354
让您获得期望中 iPhone 所能实现的

53
00:03:07,354 --> 00:03:09,122
出色的视频质量

54
00:03:09,122 --> 00:03:13,060
并适用于手机的所有四个朝向

55
00:03:16,897 --> 00:03:19,733
竖排模式为您提供

56
00:03:19,733 --> 00:03:23,637
与横排模式相比更放大的画面

57
00:03:27,307 --> 00:03:30,477
“连续互通”相机还能实现

58
00:03:30,477 --> 00:03:33,647
网络摄像头从前无法实现的功能

59
00:03:33,647 --> 00:03:37,184
其中包括数个新的视频效果

60
00:03:37,184 --> 00:03:38,986
您可能已经很熟悉

61
00:03:38,986 --> 00:03:41,355
iOS 14.5
和 macOS 12.3 中引入的

62
00:03:41,355 --> 00:03:45,993
“人物居中”和人像模式

63
00:03:45,993 --> 00:03:48,462
如果还不熟悉 我强烈建议您观看

64
00:03:48,462 --> 00:03:53,333
WWDC 2021 中的
“新的相机拍摄功能”讲座

65
00:03:53,333 --> 00:03:55,636
了解更多关于系统视频效果

66
00:03:55,636 --> 00:04:00,307
以及如何在 App 中
与其交互的信息

67
00:04:00,307 --> 00:04:03,710
让我们前往“控制中心”
并为“连续互通”相机

68
00:04:03,710 --> 00:04:06,380
启用系统视频效果

69
00:04:09,550 --> 00:04:15,255
当您四处移动时 “人物居中” 效果
确保您处在画面之中

70
00:04:17,491 --> 00:04:19,359
人像模式将背景模糊

71
00:04:19,359 --> 00:04:22,196
自然而然地把焦点放在您身上

72
00:04:22,196 --> 00:04:25,365
人像模式仅支持在搭载
Apple 芯片的 Mac 上使用

73
00:04:25,365 --> 00:04:27,100
但有了“连续互通”相机后

74
00:04:27,100 --> 00:04:32,072
它现在可用于所有搭载
Intel 和 Apple 芯片的 Mac

75
00:04:35,909 --> 00:04:38,378
“摄影室灯光”是一种
新的系统视频效果

76
00:04:38,378 --> 00:04:40,547
在 macOS 13 上可用

77
00:04:40,547 --> 00:04:42,783
可在 iPhone 12 或更新机型上

78
00:04:42,783 --> 00:04:45,219
使用此效果

79
00:04:45,219 --> 00:04:48,589
想以最佳状态出现在屏幕上
就启用这个功能吧

80
00:04:48,589 --> 00:04:50,958
它令人惊叹的照明效果

81
00:04:50,958 --> 00:04:54,795
能使背景变暗 照亮您的脸

82
00:04:54,795 --> 00:04:58,131
“摄影室灯光”非常适合
光照条件不佳的环境

83
00:04:58,131 --> 00:05:00,968
例如您正身处窗前

84
00:05:00,968 --> 00:05:03,971
为了进行清晰比较

85
00:05:03,971 --> 00:05:08,475
我将分别展示每个视频效果
同时使用效果也不错

86
00:05:13,480 --> 00:05:15,516
这些效果可以任意组合

87
00:05:15,516 --> 00:05:19,119
同时使用

88
00:05:25,125 --> 00:05:28,328
我非常想为您展示

89
00:05:28,328 --> 00:05:30,631
“连续互通”相机
另一个很棒的功能

90
00:05:30,631 --> 00:05:34,034
当您需要协同工作
并分享办公桌上的物件时

91
00:05:34,034 --> 00:05:36,103
可以使用“桌面视图”

92
00:05:36,103 --> 00:05:38,972
macOS 13 配备了
“桌面视图” App

93
00:05:38,972 --> 00:05:42,776
可以进入“控制中心”启动

94
00:05:48,448 --> 00:05:51,051
它的工作原理跟悬吊俯拍相机类似

95
00:05:51,051 --> 00:05:54,054
但不需要任何复杂的设备

96
00:05:54,054 --> 00:05:57,257
iPhone 会将
超广角摄像头源分成两部分

97
00:05:57,257 --> 00:06:00,561
同时呈现桌面和人脸

98
00:06:00,561 --> 00:06:02,963
让您可以协作完成学校项目

99
00:06:02,963 --> 00:06:05,399
或教朋友编织针法

100
00:06:05,399 --> 00:06:08,135
它利用超广角摄像头

101
00:06:08,135 --> 00:06:10,737
扩展的垂直视野

102
00:06:10,737 --> 00:06:14,374
将透视失真校正
应用于裁剪出来的画面

103
00:06:14,374 --> 00:06:18,011
随后旋转这些画面创建桌面视图

104
00:06:18,011 --> 00:06:21,014
您可以使用大多数视频会议 App

105
00:06:21,014 --> 00:06:24,852
均提供的共享窗口功能

106
00:06:24,852 --> 00:06:29,256
同时分享“桌面视图”与主摄像头源

107
00:06:52,279 --> 00:06:54,281
“桌面视图”也可以单独使用

108
00:06:54,281 --> 00:06:57,017
无需与主摄像头视频流并行

109
00:06:57,017 --> 00:06:58,285
但是 当您确实需要同时

110
00:06:58,285 --> 00:07:00,454
使用“桌面视图”和主摄像头视频流

111
00:07:00,454 --> 00:07:04,057
我们建议在主摄像头中
启用“人物居中”

112
00:07:04,057 --> 00:07:07,561
以获得拍摄人物面部
和身体更好的取景效果

113
00:07:07,561 --> 00:07:09,696
手机放置的横排和竖排模式

114
00:07:09,696 --> 00:07:12,733
均支持这项功能

115
00:07:12,733 --> 00:07:16,069
竖排模式的用途最为广泛

116
00:07:16,069 --> 00:07:19,173
因为垂直视野的范围更大

117
00:07:19,173 --> 00:07:22,009
“桌面视图”相机 API 也可以

118
00:07:22,009 --> 00:07:24,278
为您的 App 提供

119
00:07:24,278 --> 00:07:26,413
适配的定制集成方案

120
00:07:26,413 --> 00:07:29,883
稍后我将谈到 API

121
00:07:29,883 --> 00:07:32,219
在 Mac 上进行视频会议通话期间

122
00:07:32,219 --> 00:07:34,454
我们既希望您专注于会议本身

123
00:07:34,454 --> 00:07:35,923
也想确保

124
00:07:35,923 --> 00:07:38,358
您不会错过任何重要事项

125
00:07:38,358 --> 00:07:40,761
使用“连续互通”相机时

126
00:07:40,761 --> 00:07:43,764
您手机上的所有通知都将静音

127
00:07:43,764 --> 00:07:49,169
重要的来电通知
将转发至您的 Mac 上

128
00:07:49,169 --> 00:07:50,671
再见 Eric！

129
00:07:50,671 --> 00:07:53,273
Eric：再见 Karen！

130
00:07:58,846 --> 00:08:00,247
Karen：我们刚刚谈到了

131
00:08:00,247 --> 00:08:03,417
无需在 App 中
编写任何一行新代码

132
00:08:03,417 --> 00:08:07,154
就可以让用户获得的出色体验

133
00:08:07,154 --> 00:08:09,923
随着一些新 API 的运用

134
00:08:09,923 --> 00:08:12,559
“连续互通”相机体验可以

135
00:08:12,559 --> 00:08:16,597
在您的 App 中变得更为精妙绝伦

136
00:08:16,597 --> 00:08:18,165
现在大多数用户都至少

137
00:08:18,165 --> 00:08:20,834
在 Mac 上拥有两种相机设备

138
00:08:20,834 --> 00:08:24,404
我们进一步思考了
应当如何管理相机

139
00:08:24,404 --> 00:08:28,475
在 macOS 13 之前
当设备被拔出

140
00:08:28,475 --> 00:08:31,845
或者系统中有
更好的相机可供使用时

141
00:08:31,845 --> 00:08:33,213
通常需要在 App 中

142
00:08:33,213 --> 00:08:36,383
手动进行选择

143
00:08:36,383 --> 00:08:39,953
我们希望通过在 App 中
实现相机的自动切换

144
00:08:39,953 --> 00:08:43,423
为客户提供绝妙体验

145
00:08:43,423 --> 00:08:46,960
我们在 AVFoundation 框架中
添加了两个新的 API

146
00:08:46,960 --> 00:08:49,963
帮助您在 App 中构建此功能：

147
00:08:49,963 --> 00:08:52,833
AVCaptureDevice 上的
类属性 userPreferredCamera

148
00:08:52,833 --> 00:08:56,970
以及 systemPreferredCamera

149
00:08:56,970 --> 00:09:00,407
userPreferredCamera
是一个读/写属性

150
00:09:00,407 --> 00:09:02,009
每当用户在 App 中选择相机时

151
00:09:02,009 --> 00:09:05,646
都需要设定此属性

152
00:09:05,646 --> 00:09:08,081
这就让 AVCaptureDevice 类

153
00:09:08,081 --> 00:09:11,118
能够学习用户的偏好
为每个 App

154
00:09:11,118 --> 00:09:15,022
存储一份跨启动和重启的相机列表

155
00:09:15,022 --> 00:09:18,625
并使用该信息推荐相机

156
00:09:18,625 --> 00:09:21,061
它还考虑到是否有任何相机

157
00:09:21,061 --> 00:09:25,199
连接或断开的情况

158
00:09:25,199 --> 00:09:28,035
该属性可键值观察

159
00:09:28,035 --> 00:09:31,104
并可以基于用户偏好

160
00:09:31,104 --> 00:09:33,273
智能地返回最佳选择

161
00:09:33,273 --> 00:09:36,910
当最近的首选设备断开连接时

162
00:09:36,910 --> 00:09:38,812
它会自发地更换

163
00:09:38,812 --> 00:09:41,815
列表中下一个可用相机

164
00:09:41,815 --> 00:09:44,384
即使没有用户选择历史

165
00:09:44,384 --> 00:09:47,487
或未连接任何首选设备

166
00:09:47,487 --> 00:09:49,756
该属性也将始终尝试返回

167
00:09:49,756 --> 00:09:52,125
可即时使用的相机设备

168
00:09:52,125 --> 00:09:56,463
并优先考虑之前
已进行过视频流传输的相机

169
00:09:56,463 --> 00:09:59,666
只有在系统中没有可用相机时

170
00:09:59,666 --> 00:10:03,103
才返回 nil

171
00:10:03,103 --> 00:10:06,807
systemPreferredCamera
是一个只读属性

172
00:10:06,807 --> 00:10:08,842
它将 userPreferredCamera

173
00:10:08,842 --> 00:10:11,278
与其他因素结合

174
00:10:11,278 --> 00:10:15,516
对系统中相机的最佳选择进行建议

175
00:10:15,516 --> 00:10:19,152
例如 当“连续互通”相机出现

176
00:10:19,152 --> 00:10:22,756
并示意应当自动选择它时
该属性会返回

177
00:10:22,756 --> 00:10:26,527
与 userPreferredCamera 不同的值

178
00:10:26,527 --> 00:10:29,963
该属性还对设备挂起进行内部追踪

179
00:10:29,963 --> 00:10:34,801
因此它会将未挂起的设备
优先于挂起的设备

180
00:10:34,801 --> 00:10:37,938
这有助于构建自动切换行为

181
00:10:37,938 --> 00:10:40,641
便于在内置摄像头
因 MacBook 合盖而挂起时

182
00:10:40,641 --> 00:10:44,545
更换为另一个摄像头

183
00:10:44,545 --> 00:10:48,682
出现以下情况时 “连续互通”相机
将示意自动选择它：

184
00:10:48,682 --> 00:10:51,585
手机放在固定支架上

185
00:10:51,585 --> 00:10:54,788
处于横排模式 屏幕关闭

186
00:10:54,788 --> 00:10:57,758
并通过 USB 连接到 Mac

187
00:10:57,758 --> 00:11:00,994
或与 Mac 距离接近

188
00:11:00,994 --> 00:11:04,364
在这种情况下 用户的意图很明确

189
00:11:04,364 --> 00:11:08,035
即应当将该备
作为“连续互通”相机使用

190
00:11:10,704 --> 00:11:13,607
采用 systemPreferredCamera API 时

191
00:11:13,607 --> 00:11:16,410
您应当不断通过键值观察该属性

192
00:11:16,410 --> 00:11:18,545
并更新相应的 AVCaptureSession

193
00:11:18,545 --> 00:11:20,981
视频输入设备

194
00:11:20,981 --> 00:11:25,118
提供绝佳的相机选择体验

195
00:11:25,118 --> 00:11:27,821
userPreferredCamera
和 systemPreferredCamera

196
00:11:27,821 --> 00:11:31,592
已被不少第一方 App 采用

197
00:11:31,592 --> 00:11:35,295
随着越来越多的 App
采用这些 API

198
00:11:35,295 --> 00:11:37,564
我们将能够为客户提供

199
00:11:37,564 --> 00:11:41,168
一种适用于 Apple 设备的

200
00:11:41,168 --> 00:11:43,871
通用且稳定的相机选择方法

201
00:11:43,871 --> 00:11:46,039
让我来为您演示说明

202
00:11:46,039 --> 00:11:48,909
“连续互通”相机自动切换

203
00:11:48,909 --> 00:11:51,245
在 FaceTime 通话中的应用

204
00:11:56,416 --> 00:11:57,684
在 FaceTime 通话中

205
00:11:57,684 --> 00:12:00,754
我正处于自动相机选择模式

206
00:12:00,754 --> 00:12:02,689
如果想要在 App 中同时提供

207
00:12:02,689 --> 00:12:06,994
手动和自动行为选项
我们建议添加新的 UI

208
00:12:06,994 --> 00:12:10,397
用于启用和禁用自动模式

209
00:12:13,267 --> 00:12:16,937
FaceTime 通话目前正通过
内置摄像头进行视频流传输

210
00:12:16,937 --> 00:12:19,173
当我将手机从办公桌上拿起来

211
00:12:19,173 --> 00:12:23,210
并将其放在
MacBook 后面的支架上时…

212
00:12:26,180 --> 00:12:30,184
FaceTime 通话无缝切换
为使用“连续互通”相机

213
00:12:30,184 --> 00:12:32,119
进行视频流传输

214
00:12:32,119 --> 00:12:33,921
新的类属性

215
00:12:33,921 --> 00:12:36,123
systemPreferredCamera
将在此情况下发挥作用

216
00:12:36,123 --> 00:12:39,126
当手机处于随时
可以传输视频流的状态时

217
00:12:39,126 --> 00:12:43,630
属性值更改为“连续互通”相机

218
00:12:43,630 --> 00:12:47,234
您或许希望用类似的方式构建 App

219
00:12:47,234 --> 00:12:49,870
以下是我实施自动相机选择

220
00:12:49,870 --> 00:12:55,042
和手动选择模式的秘诀

221
00:12:55,042 --> 00:12:57,911
当自动相机选择启用时

222
00:12:57,911 --> 00:13:02,716
开始对 systemPreferredCamera
属性进行键值观察

223
00:13:02,716 --> 00:13:05,652
通过更新您会话的输入设备

224
00:13:05,652 --> 00:13:09,022
随时跟进
systemPreferredCamera 的变化

225
00:13:09,022 --> 00:13:11,191
在自动模式下 我们强烈推荐

226
00:13:11,191 --> 00:13:12,392
仍然为用户提供

227
00:13:12,392 --> 00:13:15,963
自主挑选相机的选项

228
00:13:15,963 --> 00:13:17,831
当用户选中不同的相机时

229
00:13:17,831 --> 00:13:20,501
为该设备设定 userPreferredCamera

230
00:13:20,501 --> 00:13:22,169
随后反映在

231
00:13:22,169 --> 00:13:26,573
systemPreferredCamera 属性值中

232
00:13:26,573 --> 00:13:29,209
当自动相机选择关闭时

233
00:13:29,209 --> 00:13:33,814
停止对 systemPreferredCamera
属性的键值观察

234
00:13:33,814 --> 00:13:36,416
在手动模式下
无需追踪 systemPreferredCamera

235
00:13:36,416 --> 00:13:39,253
您需要将用户选择的相机

236
00:13:39,253 --> 00:13:42,489
更新至会话的输入设备

237
00:13:42,489 --> 00:13:44,725
但与自动模式相同 您仍然需要

238
00:13:44,725 --> 00:13:46,560
在每次用户选择不同的相机时

239
00:13:46,560 --> 00:13:49,563
设定 userPreferredCamera 属性

240
00:13:49,563 --> 00:13:53,033
保存用户偏好相机的历史纪录

241
00:13:53,033 --> 00:13:55,202
并在回到“自动相机选择”模式时

242
00:13:55,202 --> 00:13:59,072
推荐合适的相机

243
00:13:59,072 --> 00:14:03,277
如需了解整合
userPreferredCamera 和

244
00:14:03,277 --> 00:14:06,280
systemPreferredCamera API 的
最佳实践 请查看

245
00:14:06,280 --> 00:14:10,851
全新示例 App
“‘连续互通’相机示例”

246
00:14:10,851 --> 00:14:14,188
不仅为 Mac
带来绝妙的网络摄像头体验

247
00:14:14,188 --> 00:14:17,991
“连续互通”相机
还为您提供了新的机会

248
00:14:17,991 --> 00:14:21,795
在Mac App 中
充分利用 iPhone 特有的

249
00:14:21,795 --> 00:14:23,630
强大相机功能

250
00:14:23,630 --> 00:14:27,935
我们在 macOS 13 上
添加了一些 AVCapture API

251
00:14:27,935 --> 00:14:30,103
帮助 App 更好地利用

252
00:14:30,103 --> 00:14:33,207
“连续互通”相机设备

253
00:14:33,207 --> 00:14:36,476
由于“连续互通”相机的存在
我们在 macOS 上实现了令人惊叹的

254
00:14:36,476 --> 00:14:39,913
iPhone 级照片拍摄质量

255
00:14:39,913 --> 00:14:44,051
首先 高分辨率照片的
拍摄将得到支持

256
00:14:44,051 --> 00:14:47,654
从前 macOS 仅支持与视频分辨率

257
00:14:47,654 --> 00:14:49,389
同等的照片拍摄

258
00:14:49,389 --> 00:14:52,426
从 macOS 13 开始 您将能够

259
00:14:52,426 --> 00:14:56,797
使用“连续互通”相机拍摄
分辨率高达 1,200 万像素的照片

260
00:14:56,797 --> 00:14:59,333
想要启用这项功能
在拍摄会话开始前

261
00:14:59,333 --> 00:15:01,902
首先要在
AVCapturePhotoOutput 对象上

262
00:15:01,902 --> 00:15:05,038
将 highResolutionCaptureEnabled
设置为 true

263
00:15:05,038 --> 00:15:08,008
然后在每次拍摄的

264
00:15:08,008 --> 00:15:10,911
photoSettings 对象上

265
00:15:10,911 --> 00:15:16,350
将 highResolutionPhotoEnabled
属性设置为 true

266
00:15:16,350 --> 00:15:19,319
除了拍摄高分辨率照片

267
00:15:19,319 --> 00:15:23,123
“连续互通”相机还支持

268
00:15:23,123 --> 00:15:25,592
控制照片质量优先于拍摄速度

269
00:15:25,592 --> 00:15:30,030
实现方式是首先
在 photoOutput 对象上

270
00:15:30,030 --> 00:15:32,165
设置
maxPhotoQualityPrioritization

271
00:15:32,165 --> 00:15:36,603
随后在
AVCapturePhotoSettings 对象上

272
00:15:36,603 --> 00:15:39,006
为每次拍摄设置

273
00:15:39,006 --> 00:15:44,111
photoQualityPrioritization 属性

274
00:15:44,111 --> 00:15:47,281
如需了解
如何为 App 选择正确优先级

275
00:15:47,281 --> 00:15:49,516
请您查看

276
00:15:49,516 --> 00:15:52,252
WWDC 2021

277
00:15:52,252 --> 00:15:58,158
“使用视频格式拍摄高质量照片”

278
00:15:58,158 --> 00:16:01,695
另一个与照片相关的功能
是闪光灯拍摄

279
00:16:01,695 --> 00:16:04,932
您可以通过在 photoSettings
对象上设置 flashMode

280
00:16:04,932 --> 00:16:08,068
来控制闪光灯是应该打开、关闭

281
00:16:08,068 --> 00:16:09,870
还是自动选择

282
00:16:09,870 --> 00:16:14,842
基于场景和光照条件

283
00:16:14,842 --> 00:16:17,411
我们也让 AVCaptureMetadataOutput
适用于 macOS

284
00:16:17,411 --> 00:16:22,049
允许对拍摄会话产生的时序元数据

285
00:16:22,049 --> 00:16:25,185
进行处理

286
00:16:25,185 --> 00:16:27,654
您现在可以对来自 iPhone 的
面部元数据对象

287
00:16:27,654 --> 00:16:32,092
和人体元数据对象进行流传输

288
00:16:32,092 --> 00:16:34,161
让我们看看如何设置会话

289
00:16:34,161 --> 00:16:37,531
来接收人脸元数据对象

290
00:16:37,531 --> 00:16:39,066
在具备适当的视频输入和输出的

291
00:16:39,066 --> 00:16:41,468
会话设置完成后

292
00:16:41,468 --> 00:16:44,972
您需要创建
AVCaptureMetadataOutput

293
00:16:44,972 --> 00:16:48,842
并调用 addOutput
将其添加到会话中

294
00:16:48,842 --> 00:16:51,712
要特定接收人脸元数据

295
00:16:51,712 --> 00:16:54,414
必须在输出处设置对象类型数组

296
00:16:54,414 --> 00:16:57,784
包含人脸对象类型

297
00:16:57,784 --> 00:17:01,221
通过检查
availableMetadataObjectTypes 属性

298
00:17:01,221 --> 00:17:02,155
确保能够支持

299
00:17:02,155 --> 00:17:06,026
请求的元数据类型

300
00:17:06,026 --> 00:17:10,731
接下来设置委托 接收元数据回调

301
00:17:10,731 --> 00:17:12,566
会话开始运行后

302
00:17:12,566 --> 00:17:13,867
您将得到回调

303
00:17:13,867 --> 00:17:18,572
以及实时生成的人脸元数据对象

304
00:17:18,572 --> 00:17:22,609
除了我们刚刚谈到的照片拍摄输出

305
00:17:22,609 --> 00:17:24,044
和拍摄元数据输出

306
00:17:24,044 --> 00:17:27,714
“连续互通”相机
还支持视频数据输出

307
00:17:27,714 --> 00:17:33,320
电影文件输出和视频预览层功能

308
00:17:33,320 --> 00:17:37,057
以下是“连续互通”相机支持的
视频格式列表

309
00:17:37,057 --> 00:17:38,692
了解这些信息

310
00:17:38,692 --> 00:17:42,129
有助于将此相机
集成到您的 App 中

311
00:17:42,129 --> 00:17:45,165
它支持三种 16x9 画幅格式

312
00:17:45,165 --> 00:17:48,936
从 640x480 到 1080p

313
00:17:48,936 --> 00:17:53,640
和一种 4x3 画幅格式：1920x1440

314
00:17:53,640 --> 00:17:54,942
您可以选择

315
00:17:54,942 --> 00:17:57,711
支持最高每秒 30 帧

316
00:17:57,711 --> 00:18:01,181
或最高每秒 60 帧的格式
视需要而定

317
00:18:01,181 --> 00:18:05,285
另一项主要新增功能
是“桌面视图”设备 API

318
00:18:05,285 --> 00:18:10,090
“桌面视图”相机作为
单独的 AVCaptureDevice 公开

319
00:18:10,090 --> 00:18:12,793
有两种方法可以找到这个设备

320
00:18:12,793 --> 00:18:14,461
第一种方法是
通过在设备发现会话中

321
00:18:14,461 --> 00:18:17,130
查询
AVCaptureDeviceTypeDeskViewCamera

322
00:18:17,130 --> 00:18:20,968
来进行查找

323
00:18:20,968 --> 00:18:23,136
另一种方法是 如果您已经知道

324
00:18:23,136 --> 00:18:26,540
主摄像头的 AVCaptureDevice 对象

325
00:18:26,540 --> 00:18:28,909
就可以使用该设备上的
companionDeskViewCamera 属性

326
00:18:28,909 --> 00:18:33,013
来访问“桌面视图”设备

327
00:18:33,013 --> 00:18:35,916
此 API 将有助于在周围存在

328
00:18:35,916 --> 00:18:37,618
多个“连续互通”相机的情况下

329
00:18:37,618 --> 00:18:42,055
对主摄像头和
“桌面视图”设备进行配对

330
00:18:42,055 --> 00:18:44,458
一旦有了所需的“桌面视图”相机的

331
00:18:44,458 --> 00:18:46,894
AVCaptureDevice 对象

332
00:18:46,894 --> 00:18:50,898
您可以将它与拍摄视频数据输出、

333
00:18:50,898 --> 00:18:52,566
电影文件输出、

334
00:18:52,566 --> 00:18:55,869
或拍摄会话中的
视频预览层一起使用

335
00:18:55,869 --> 00:19:00,674
就像使用其他相机设备一样

336
00:19:00,674 --> 00:19:03,544
“桌面视图”设备
目前支持一种流格式

337
00:19:03,544 --> 00:19:06,180
即 420v 像素格式

338
00:19:06,180 --> 00:19:10,350
该格式的分辨率为 1920x1440

339
00:19:10,350 --> 00:19:14,154
支持的最高帧率为每秒 30 帧

340
00:19:14,154 --> 00:19:16,423
讲座就到这里结束了

341
00:19:16,423 --> 00:19:18,492
您已经了解了“连续互通”相机

342
00:19:18,492 --> 00:19:22,162
如何在 macOS 上
实现奇妙的相机选择

343
00:19:22,162 --> 00:19:25,699
以及几个
在 Mac App 中用于集成

344
00:19:25,699 --> 00:19:27,968
“连续互通”相机的新 API

345
00:19:27,968 --> 00:19:31,271
我很期待看到您运用这些 API

346
00:19:31,271 --> 00:19:34,208
希望您之后
在 WWDC 上一切顺利

347
00:19:34,208 --> 00:19:38,645
♪

